<!DOCTYPE html>
{%load static%}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coscraper</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="{% static 'css/main.css' %}" rel="stylesheet" />
    <link href="{% static 'css/navbar.css' %}" rel="stylesheet" />
    <div class="topnav">
        <a class="active" href="./home">Home</a>
        <a href="./overview">Overview</a>
      </div>
</head>
<body style="background-color:aliceblue">
    <form action="{% url 'search' %}" method="get">
            {% csrf_token %}
          <br>
  
                <!-- <input  type="search" placeholder="Search tweet" aria-label="Search" name="query_1" default="None" class="form-control" style="width: 500px;" >
                <button class="btn-search" type="submit" >
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 2  22 20" >
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                      </svg>
                </button> -->

                <h4 style="text-align:left;">Advance filters : </h4>   
    <table>          
    <tbody>
        <tr>
            <td>
                <p>
                    <select name="poi_name" class="form-control">
                       
                       <option value="">Select a POI</option>
                       <option value="RahulGandhi">Rahul Gandhi</option>
                       <option value="CDCgov" >CDC Gov</option>
                       <option value="JoeBiden">Joe Biden</option>
                       <option value="KamalaHarris">Kamala Harris</option>
                       <option value="BarackObama">Barack Obama</option>
                       <option value="tedcruz">Ted Cruz</option>
                       <option value="HHSGov">HHS Gov</option>
                       <option value="MoHFW_INDIA">Ministry of health</option>
                       <option value="narendramodi">Narendra Modi</option>
                       <option value="AmitShah">Amit Shah</option>
                       <option value="ArvindKejriwal">Arvind Kejriwal</option>
                       <option value="SSalud_mx">Salud Mexico</option>
                       <option value="lopezobrador_">Andrés Manuel</option>
                       <option value="m_ebrard">Marcelo Ebrard C.</option>
                       <option value="PRI_Nacional">PRI</option>
                       <option value="PRDMexico">PRD</option>
                       <option value="rodrigobocardi">Rodrigo Bocardi</option>
                    </select>   
                    </p>       
            </td>
            <td>
                <p>
                <select name="country" class="form-control">
          
                    <option value="">Select a country</option>
                    <option value="INDIA">INDIA</option>
                    <option value="MEXICO" >MEXICO</option>
                    <option value="USA">USA</option>
                </select>    
                </p>    
            </td>
            <td>
                <p>
                    <select name="language" class="form-control">
          
                        <option value="">Select a language</option>
                        <option value="hi">Hindi</option>
                        <option value="es" >Spanish</option>
                        <option value="en">English</option>
                        
                
                    </select>
                </p>

            </td>
            <td>
                
                 <input type="submit" value="Go"/>
                 <!-- <button class="btn-search" type="submit" >
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 2  22 20" >
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                      </svg>
                </button> -->
                <!-- <script>
                    const queryString = window.location.search;
                    console.log(queryString);
                    const urlParams = new URLSearchParams(queryString);
                    // const query = urlParams.get('query')
                    // console.log(query);
                    const query_1 = urlParams.get('query_1')
                    console.log(query_1);

                </script> -->
                <input type="hidden" name="query" value={{ request.GET.query}}/> 
                <!-- <button class="btn-search" type="submit" >
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 2  22 20" >
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                      </svg>
                </button> -->
            </td>
        </tr>
    
    </tbody>    
    </table>
            </div>
            
    </form>
    <br>

<div class="row no-gutters">
    <div class="col-md-6"style="padding-left: 10px;">
       <div class="leftside" style="word-wrap: break-word; width:800px;text-align: justify;text-justify: inter-word;">
        {% for i in time_series_json_string %}
        {% for k, v in i.items%}
        <tr style=" border: 1px solid black;width: 100px; overflow: hidden">
            {% if k == "poi_name" %}
                <div style="font-size: large;">
                    <span style="color: darkblue;">@</span><strong style="color: #1DA1F2;">{{v}}</strong>
                </div> 
            {% endif %}
            {% if k == "tweet_text" %}
                {{v}}
            {% endif %}
            {% if k == "sentiment" and v == "negative" %}
                Public Response: <strong style="color: red">{{v}}</strong>
            {% endif %} 
            {% if k == "sentiment" and v == "positive" %}
                Public Response: <strong style="color: green">{{v}}</strong>
            {% endif %} 
            {% if k == "sentiment" and v == "neutral" %}
                Public Response: <strong style="color: orange">{{v}}</strong>
            {% endif %} 
            {% if k == "replies" %}
                {% if v|length > 1 %}
                    <div><strong style="color: black;">Top Replies:</strong></div>
                {% endif %}
                {% for reply in v %}
                    {% for key, val in reply.items%}
                        {% if key == "tweet_text" %}
                            <div style="padding-left: 20px;">{{val}}</div>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
            {% endif %}
        </tr>
        {% endfor %}
        <br>
        <hr style="border-top:1px dotted #ccc;"/>
        <br>
    {% endfor %}
        </div>
    </div>
    <div class="col-md-6">
        <div class="rightside" style="float: right; margin: 10px 15px 15px 0px;">
            <h1 style="font-size:2vw">Sentiment Analysis of General Population Tweets</h1>

                {% autoescape off %}
                {{ plot_div }}
                {% endautoescape %}
                <br>
                <br>
                <h1 style="font-size:2vw">Sentiment Analysis of replies to POI Tweets</h1>

                {% autoescape off %}
                {{ plot_div_replies }}
                {% endautoescape %}  
        </div>
    </div>    
</div>    
</body>
</html> 